#!/usr/bin/python3

import sys

class RSAFactorizer:
    def __init__(self, filename):
        self.filename = filename

    def read_numbers_from_file(self):
        """Read numbers from the file and return them as a list of integers."""
        try:
            with open(self.filename, 'r', encoding="utf-8") as file:
                return [int(line.strip()) for line in file]
        except FileNotFoundError:
            print(f"Error: File '{self.filename}' not found.")
            return []
        except ValueError:
            print(f"Error: Invalid number in file '{self.filename}'.")
            return []

    def find_factors(self, number):
        """Find and print the factors of a given number."""
        for i in range(2, int(number**0.5) + 1):
            if number % i == 0:
                print(f"{number}={number//i}*{i}")
                return
        print(f"{number} is prime")

    def factorize_all(self):
        """Factorize all numbers in the file."""
        numbers = self.read_numbers_from_file()
        for number in numbers:
            self.find_factors(number)

def main():
    if len(sys.argv) < 2:
        print("Usage: ./rsa <file1> [file2 ...]")
        sys.exit(1)

    for filename in sys.argv[1:]:
        factorizer = RSAFactorizer(filename)
        factorizer.factorize_all()

if __name__ == "__main__":
    main()
